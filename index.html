<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DimeX Dashboard</title>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
<script src="https://unpkg.com/@walletconnect/ethereum-provider@2.11.0/dist/index.umd.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{margin:0;background:#000;color:#fff;font-family:Arial;text-align:center}

.header{padding:20px}
.logo{width:70px}
.title{color:gold;font-size:24px;font-weight:bold}

.btn{
background:gold;
border:none;
padding:12px 18px;
border-radius:8px;
font-weight:bold;
font-size:15px;
cursor:pointer;
min-width:180px;
margin:8px;
}

.card{
background:#111;
padding:18px;
border-radius:14px;
margin:14px auto;
width:92%;
max-width:420px;
}

.statGrid{
display:grid;
grid-template-columns:1fr 1fr;
gap:12px;
width:92%;
margin:auto;
max-width:500px;
}

.statBox{
background:#111;
padding:14px;
border-radius:12px;
}

.statValue{
color:gold;
font-weight:bold;
font-size:18px;
margin-top:6px;
}

input{
padding:14px;
width:90%;
margin:10px;
background:#000;
color:#fff;
border:1px solid #333;
border-radius:8px;
}

.popup{
display:none;
position:fixed;
top:0;left:0;
width:100%;
height:100%;
background:rgba(0,0,0,.9);
z-index:999;
}

.popupBox{
background:#111;
padding:20px;
margin:60px auto;
width:90%;
max-width:400px;
border-radius:12px;
}
</style>
</head>

<body>

<div class="header">
<img src="https://i.ibb.co/zVB8fHMD/logo.png" class="logo">
<div class="title">DimeX Dashboard</div>
</div>

<button class="btn" onclick="connect()">CONNECT WALLET</button>

<div id="wallet"></div>
<div id="status" style="color:gold"></div>

<!-- STATS -->
<div class="statGrid">

<div class="statBox">Total Stake
<div id="totalStake" class="statValue">0</div></div>

<div class="statBox">Daily Reward
<div id="dailyReward" class="statValue">0</div></div>

<div class="statBox">Direct Income
<div id="directIncome" class="statValue">0</div></div>

<div class="statBox">Level Income
<div id="levelIncome" class="statValue">0</div></div>

<div class="statBox">Total Income
<div id="totalIncome" class="statValue">0</div></div>

<div class="statBox">Team Count
<div id="teamCount" class="statValue">0</div></div>

</div>

<!-- REFERRAL -->
<div class="card">
Referral Link
<input id="refInput" readonly>
<button class="btn" onclick="copyRef()">COPY</button>
</div>

<!-- STAKE -->
<div class="card">
<button class="btn" onclick="toggleStake()">STAKE</button>
</div>

<div id="stakeBox" style="display:none">

<div class="card">
<h3>USDT</h3>
<input placeholder="Amount">
<button class="btn">Approve</button>
<button class="btn">Stake</button>
</div>

<div class="card">
<h3>DMX</h3>
<input placeholder="Amount">
<button class="btn">Approve</button>
<button class="btn">Stake</button>
</div>

</div>

<!-- CLAIM -->
<div class="card">
Claimable: <span style="color:gold">0</span>
<br>
<button class="btn">CLAIM</button>
</div>

<!-- DOWNLINE + HISTORY -->
<div class="card">
<button class="btn" onclick="openDownline()">VIEW DOWNLINE</button>
<button class="btn" onclick="openHistory()">CLAIM HISTORY</button>
</div>

<!-- DOWNLINE POPUP -->
<div id="downlineBox" class="popup">
<div class="popupBox">
<h3>Downline</h3>
User1<br>User2<br>
<button class="btn" onclick="closeDownline()">CLOSE</button>
</div>
</div>

<!-- HISTORY POPUP -->
<div id="historyBox" class="popup">
<div class="popupBox">
<h3>Claim History</h3>
10 USDT<br>5 USDT
<br><br>
<button class="btn" onclick="downloadHistory()">DOWNLOAD</button>
<button class="btn" onclick="closeHistory()">CLOSE</button>
</div>
</div>

<script>

let provider, signer;

// CONNECT
async function connect(){

try{

let providerInstance;

if(window.ethereum){
providerInstance = new ethers.providers.Web3Provider(window.ethereum);
await providerInstance.send("eth_requestAccounts", []);
}else{

const wc = await window.EthereumProvider.init({
projectId:"62a73933d62534edcd2f54b8a06c4319",
chains:[56],
showQrModal:true
});

await wc.enable();
providerInstance = new ethers.providers.Web3Provider(wc);
}

provider=providerInstance;
signer=provider.getSigner();

let addr = await signer.getAddress();
document.getElementById("wallet").innerHTML="Wallet: "+addr;

document.getElementById("refInput").value=
window.location.origin+"?ref="+addr;

document.getElementById("status").innerHTML="Connected";

}catch(e){
alert("Wallet failed");
}

}

// stake toggle
function toggleStake(){
let b=document.getElementById("stakeBox");
b.style.display=b.style.display=="none"?"block":"none";
}

// copy ref
function copyRef(){
let x=document.getElementById("refInput");
x.select();
document.execCommand("copy");
}

// downline
function openDownline(){
document.getElementById("downlineBox").style.display="block";
}
function closeDownline(){
document.getElementById("downlineBox").style.display="none";
}

// history
function openHistory(){
document.getElementById("historyBox").style.display="block";
}
function closeHistory(){
document.getElementById("historyBox").style.display="none";
}

function downloadHistory(){
let data="Claim history";
let blob=new Blob([data]);
let a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="history.txt";
a.click();
}

</script>

</body>
  </html>
