<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DimeX Dashboard</title>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
<script src="https://unpkg.com/@walletconnect/ethereum-provider@2.11.0/dist/index.umd.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{margin:0;background:#000;color:#fff;font-family:Arial;text-align:center}
.header{padding:20px}
.logo{width:70px}
.title{font-size:24px;color:gold;font-weight:bold}

.btn{
background:gold;
border:none;
padding:14px 26px;
border-radius:10px;
font-weight:bold;
font-size:15px;
cursor:pointer;
margin:10px auto;
display:flex;
align-items:center;
justify-content:center;
min-width:200px;
color:#000;
}

.card{background:#111;padding:18px;border-radius:12px;margin:12px auto;width:92%;max-width:420px}
.statGrid{display:grid;grid-template-columns:1fr 1fr;gap:10px;width:92%;max-width:500px;margin:auto}
.statBox{background:#111;padding:14px;border-radius:12px}
.statValue{color:gold;font-weight:bold;margin-top:6px}
i{color:gold;margin-bottom:6px}
input{padding:12px;width:90%;background:#000;color:#fff;border:1px solid #333;border-radius:8px;margin:8px}
.popup{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#000e;justify-content:center;align-items:center}
.popupBox{background:#111;padding:20px;border-radius:12px;width:90%;max-width:400px}
</style>
</head>

<body>

<div class="header">
<img src="https://i.ibb.co/zVB8fHMD/logo.png" class="logo">
<div class="title">DimeX Dashboard</div>
</div>

<button class="btn" onclick="connect()">
<i class="fa-solid fa-wallet"></i> CONNECT WALLET
</button>

<div id="wallet"></div>
<div id="status" style="color:gold"></div>

<!-- STATS -->
<div class="statGrid">

<div class="statBox">
<i class="fa-solid fa-coins"></i>
Total Stake
<div id="totalStake" class="statValue">0</div>
</div>

<div class="statBox">
<i class="fa-solid fa-bolt"></i>
Daily Reward
<div id="dailyReward" class="statValue">0</div>
</div>

<div class="statBox">
<i class="fa-solid fa-user-plus"></i>
Direct Income
<div id="directIncome" class="statValue">0</div>
</div>

<div class="statBox">
<i class="fa-solid fa-sitemap"></i>
Level Income
<div id="levelIncome" class="statValue">0</div>
</div>

<div class="statBox">
<i class="fa-solid fa-chart-line"></i>
Total Income
<div id="totalIncome" class="statValue">0</div>
</div>

<div class="statBox">
<i class="fa-solid fa-users"></i>
Team Count
<div id="teamCount" class="statValue">0</div>
</div>

</div>

<!-- REF LINK -->
<div class="card">
<h3><i class="fa-solid fa-link"></i> Referral Link</h3>
<input id="refInput" readonly>
<button class="btn" onclick="copyRef()">COPY</button>
</div>

<!-- STAKE -->
<div class="card">
<button class="btn" onclick="toggleStake()">
<i class="fa-solid fa-lock"></i> STAKE
</button>
</div>

<div id="stakeBox" style="display:none">

<div class="card">
<h3>USDT(BEP20)</h3>
<input id="usdtAmount" placeholder="Amount">
<button class="btn" onclick="approveUSDT()">Approve</button>
<button class="btn" onclick="stakeUSDT()">Stake</button>
</div>

<div class="card">
<h3>DMX</h3>
<input id="dxAmount" placeholder="Amount">
<button class="btn" onclick="approveDX()">Approve</button>
<button class="btn" onclick="stakeDX()">Stake</button>
</div>

</div>

<!-- CLAIM -->
<div class="card">
<h3><i class="fa-solid fa-gift"></i> Claim</h3>
<div id="claimAmount" style="color:gold;font-size:22px">0</div>
<button class="btn" onclick="claim()">CLAIM</button>
</div>

<!-- DOWNLINE -->
<div class="card">
<button class="btn" onclick="openDownline()">
<i class="fa-solid fa-network-wired"></i> VIEW DOWNLINE
</button>
<button class="btn" onclick="openHistory()">
<i class="fa-solid fa-clock"></i> CLAIM HISTORY 
</button>
</div>

<!-- POPUPS -->
<div class="popup" id="downlinePopup">
<div class="popupBox">
<h3>Downline Tree</h3>
<div id="downlineData">Loading...</div>
<button class="btn" onclick="closePopup()">Close</button>
</div>
</div>

<div class="popup" id="historyPopup">
<div class="popupBox">
<h3>Claim History</h3>
<div id="historyData">No history</div>
<button class="btn" onclick="closePopup()">Close</button>
</div>
</div>

<script>

let provider, signer;
const STAKING_ADDRESS="PASTE_STAKING_CONTRACT";
const DX_TOKEN="PASTE_DMX_TOKEN";
const USDT="0x55d398326f99059fF775485246999027B3197955";

function toggleStake(){
let b=document.getElementById("stakeBox");
b.style.display=b.style.display=="none"?"block":"none";
}

function copyRef(){
navigator.clipboard.writeText(document.getElementById("refInput").value);
alert("Copied");
}

function openDownline(){
document.getElementById("downlinePopup").style.display="flex";
}

function openHistory(){
document.getElementById("historyPopup").style.display="flex";
}

function closePopup(){
document.querySelectorAll(".popup").forEach(p=>p.style.display="none");
}

async function connect(){

try{

let providerInstance;

if(window.ethereum){
providerInstance = new ethers.providers.Web3Provider(window.ethereum);
await providerInstance.send("eth_requestAccounts", []);
}else{
const wc = await window.EthereumProvider.init({
projectId:"62a73933d62534edcd2f54b8a06c4319",
chains:[56],
showQrModal:true,
metadata:{name:"DimeX",description:"DimeX",url:window.location.origin,icons:["https://i.ibb.co/zVB8fHMD/logo.png"]}
});
await wc.enable();
providerInstance=new ethers.providers.Web3Provider(wc);
}

provider=providerInstance;
signer=provider.getSigner();

let addr=await signer.getAddress();
document.getElementById("wallet").innerHTML="Wallet: "+addr;

document.getElementById("refInput").value=
window.location.origin+"?ref="+addr;

document.getElementById("status").innerHTML="Wallet Connected";

loadData();
setInterval(loadData,10000);

}catch(e){
alert("Wallet failed");
}

}

async function loadData(){
document.getElementById("totalStake").innerHTML=Math.floor(Math.random()*1000);
document.getElementById("dailyReward").innerHTML=Math.floor(Math.random()*50);
document.getElementById("directIncome").innerHTML=Math.floor(Math.random()*200);
document.getElementById("levelIncome").innerHTML=Math.floor(Math.random()*150);
document.getElementById("totalIncome").innerHTML=Math.floor(Math.random()*500);
document.getElementById("teamCount").innerHTML=Math.floor(Math.random()*20);
document.getElementById("claimAmount").innerHTML=Math.floor(Math.random()*80);
}

function approveUSDT(){alert("USDT Approved")}
function stakeUSDT(){alert("USDT Staked")}
function approveDX(){alert("DMX Approved")}
function stakeDX(){alert("DMX Staked")}
function claim(){alert("Claim sent")}

</script>

</body>
  </html>
